---
description: Optimize CLAUDE.md memory files 
---

# CLAUDE.md Memory Optimization Command

Systematically optimize CLAUDE.md memory files for maximum accuracy and efficiency. Follow this focused approach based on Claude Code's official memory management patterns.

## Reference Documentation
For official Claude Code memory management guidance, see: https://docs.anthropic.com/en/docs/claude-code/memory

Key project memory principles:
- **Project Memory (`./CLAUDE.md`)**: Team-shared instructions, project architecture, and coding standards
- **Structured Organization**: Use markdown with bullet points for clarity and precision  
- **Be Specific**: Use precise instructions rather than generic guidance
- **Component Imports**: Leverage `@path/to/import` for modular memory organization

## 1. Quick Analysis

**Assess project files:**
- Analyze project structure and directory layout
- Analyze codebase implementation and patterns
- Identify and analyze documents and structure
- Identify memory system files (CLAUDE.md files and similar memory-related files)
- Identify task tracking files (progress, status, API tracking, or implementation files)
- Review existing patterns and conventions in the codebase
- Assess current project memory organization against Claude Code standards
- Check for memory import usage and component separation patterns

**Assessment checklist:**
- ✅ Project structure and directory layout analyzed
- ✅ Codebase implementation and patterns analyzed
- ✅ Documents and structure identified and analyzed
- ✅ Memory system files identified (CLAUDE.md files and similar)
- ✅ Task tracking files identified (progress, status, tracking files)
- ✅ Existing patterns and conventions documented
- ✅ Project memory organization assessed against Claude Code standards
- ✅ Memory import patterns and component separation verified
- ✅ Specificity and precision of current memory instructions evaluated

## 2. Optimization Actions

**Priority 1: Root CLAUDE.md optimization**
- Essential commands and project setup
- Core principles and domain-specific focus
- Project tracking workflow (if task tracking files exist)
- Component discovery map (which CLAUDE.md loads when)
- Memory maintenance section
- Document maintenance section (if applicable)

**Priority 2: Component CLAUDE.md optimization**
- Context activation triggers (when this memory loads)
- Established patterns from actual code with file:line references ONLY (no code snippets)
- Reference actual implementations by file:line - avoid maintenance overhead of code duplication
- Quality standards as actionable checklists
- Domain-specific workflow integration (if applicable)

**Priority 3: Redundancy elimination**
- Remove duplicate explanations between files
- Eliminate theoretical checklists not based on analyzed codebase
- Remove code snippets from memory files - use file:line references only
- Merge similar concepts across memory files
- Replace generic guidance with specific file:line references to analyzed code

## 3. Quality Verification

**Success metrics:**
- Token reduction while maintaining essential guidance
- All code references point to actual implemented features from analyzed codebase
- NO code snippets in memory files - file:line references only to prevent maintenance overhead
- Clear separation: project-level (root) vs component-level (sub) information
- Zero redundant content across memory files
- Memory files accurately reflect analyzed implementation patterns
- Alignment with Claude Code project memory best practices (structured markdown, specificity)
- Proper use of memory imports for component organization
- Memory instructions follow "be specific" principle with precise, actionable guidance

**Verification steps:**
- Verify all referenced code exists by checking each file:line reference in memory files
- Check memory file sizes reduced appropriately 
- Ensure component discovery map is accurate
- Validate memory organization follows Claude Code project memory patterns
- Confirm memory imports are properly structured and functional
- Verify instructions are specific and actionable per Claude Code standards

## 4. Maintenance Integration

**Add to root CLAUDE.md:**
```markdown
## Memory Maintenance
- **Update CLAUDE.md files** - When implementation patterns change or new components added
- **Reflect actual code** - Memory files must match current implementation, not theoretical patterns  
- **Component-specific guidance** - Each subtree provides focused context for its domain

## Document Maintenance
- **Update relevant documentation** - When code changes affect documented workflows or APIs
- **Maintain accuracy** - Keep documentation synchronized with actual implementation

## Task Progress Maintenance (if task tracking files exist)
When implementing a task, update status in identified task tracking files:
- Update progress markers in main task tracking file
- Mark completed items in implementation tracking files
- Update status indicators in reference documentation

Update triggers: New modules, architectural changes, function signatures modified, documentation becomes outdated
```

**Component-specific updates:**
- Update component CLAUDE.md when exports change in analyzed codebase
- Refresh implementation status when analyzed code patterns evolve
- Maintain accurate file:line references to actual implemented code
- Update related documentation files when memory optimization reveals outdated content

**Documentation synchronization:**
- Check project documentation files for accuracy against analyzed codebase after memory optimization
- Refresh documentation that references optimized components
- Verify cross-references between memory files and documentation remain valid
- Ensure documentation reflects actual analyzed implementation

Execute this optimization to create accurate, efficient memory files that provide maximum contextual value with minimal token usage.